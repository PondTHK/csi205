import{r as l,j as e}from"./index-hboBm3yt.js";const D=[5,10,50,100];function $(){const[c,h]=l.useState([]),[M,y]=l.useState(!0),[w,v]=l.useState(null),[i,E]=l.useState(!1),[d,I]=l.useState(10),[n,x]=l.useState(1),[b,p]=l.useState(!1),[k,g]=l.useState(""),[j,r]=l.useState(null),C=l.useId();l.useEffect(()=>{let t=!1;async function a(){try{y(!0);const s=await fetch("https://jsonplaceholder.typicode.com/todos");if(!s.ok)throw new Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ todos à¹„à¸”à¹‰");const N=await s.json();t||(h(N),v(null))}catch(s){t||v(s instanceof Error?s.message:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}finally{t||y(!1)}}return a(),()=>{t=!0}},[]);const o=l.useMemo(()=>i?c.filter(t=>!t.completed):c,[i,c]);l.useEffect(()=>{const t=Math.max(1,Math.ceil(o.length/d)||1);x(a=>{const s=Math.min(a,t);return s===a?a:s})},[o.length,d]);const S=l.useMemo(()=>{const t=(n-1)*d;return o.slice(t,t+d)},[n,o,d]),m=Math.max(1,Math.ceil(o.length/d)||1),T=l.useMemo(()=>c.reduce((t,a)=>Math.max(t,a.id),0)+1,[c]),P=t=>{h(a=>a.map(s=>s.id===t?{...s,completed:!s.completed}:s))},F=t=>{h(a=>a.filter(s=>s.id!==t))},O=()=>{r(null),g(""),p(!0)},f=()=>{p(!1),r(null)},A=t=>{t.preventDefault();const a=k.trim();if(!a){r("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸£à¸²à¸¢à¸à¸²à¸£à¸à¹ˆà¸­à¸™à¸šà¸±à¸™à¸—à¸¶à¸");return}const s=[...c,{id:T,title:a,completed:!1}];h(s),p(!1),g(""),r(null);const N=i?s.filter(z=>!z.completed):s;x(Math.max(1,Math.ceil(N.length/d)))},u=t=>{x(Math.max(1,Math.min(t,m)))};return e.jsxs("div",{className:"container py-4 d-flex flex-column gap-4",children:[e.jsx("div",{className:"p-4 bg-dark text-white rounded-4 shadow-lg",children:e.jsx("h1",{className:"m-0 fs-3 fw-bold",children:"Todos App"})}),e.jsx("section",{className:"card shadow-lg border-light-subtle",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row justify-content-lg-between gap-3 align-items-lg-center mb-3",children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-3",children:[e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{id:C,className:"form-check-input",type:"checkbox",role:"switch",checked:i,onChange:t=>E(t.target.checked)}),e.jsx("label",{className:"form-check-label",htmlFor:C,children:"Show only"})]}),e.jsx("span",{className:`badge rounded-pill ${i?"bg-warning text-dark":"bg-secondary"}`,children:"waiting â±ï¸"})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("label",{htmlFor:"page-size",className:"text-muted small mb-0",children:"Items per page"}),e.jsx("select",{id:"page-size",className:"form-select form-select-sm",value:d,onChange:t=>{I(Number(t.target.value)),x(1)},children:D.map(t=>e.jsxs("option",{value:t,children:[t," items per page"]},t))})]})]}),M?e.jsx("div",{className:"py-5 text-center text-muted",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."}):w?e.jsx("div",{className:"alert alert-danger",role:"alert",children:w}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle table-striped",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"80px"},children:"ID"}),e.jsx("th",{className:"text-start",children:"Title"}),e.jsxs("th",{className:"text-center",style:{width:"200px"},children:["Completed",e.jsx("button",{type:"button",className:"btn btn-primary btn-sm ms-2",onClick:O,children:"+"})]})]})}),e.jsx("tbody",{children:S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center text-muted py-4",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚"})}):S.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge rounded-pill text-bg-secondary",children:t.id})}),e.jsx("td",{className:"text-start text-wrap",children:t.title}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{type:"button",className:`btn btn-sm ${t.completed?"btn-success":"btn-warning text-dark"}`,onClick:()=>P(t.id),children:t.completed?"done âœ…":"waiting â±ï¸"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>F(t.id),children:"ðŸ—‘ï¸"})]})})]},t.id))})]})}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-2 mt-3",children:[e.jsxs("div",{className:"text-muted small",children:["à¸«à¸™à¹‰à¸² ",n," / ",m," Â· à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"," ",o.length," à¸£à¸²à¸¢à¸à¸²à¸£"]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:n===1,onClick:()=>u(1),children:"First"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:n===1,onClick:()=>u(n-1),children:"Previous"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:n===m,onClick:()=>u(n+1),children:"Next"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",disabled:n===m,onClick:()=>u(m),children:"Last"})]})]})]})]})}),e.jsx("div",{className:`modal fade ${b?"show":""}`,style:{display:b?"block":"none"},tabIndex:-1,role:"dialog",onClick:f,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",role:"document",onClick:t=>t.stopPropagation(),children:e.jsx("div",{className:"modal-content rounded-4",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title fw-bold",children:"Add todo"}),e.jsx("button",{type:"button",className:"btn-close",onClick:f,"aria-label":"Close add todo modal"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"new-todo-id",className:"form-label",children:"ID"}),e.jsx("input",{id:"new-todo-id",className:"form-control",value:T,readOnly:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"new-todo-title",className:"form-label",children:"Title"}),e.jsx("input",{id:"new-todo-title",className:"form-control",placeholder:"typing your todo title here...",value:k,onChange:t=>{g(t.target.value),j&&r(null)},autoFocus:!0})]}),j?e.jsx("div",{className:"alert alert-warning py-2",role:"alert",children:j}):null]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:f,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})})})}),b&&e.jsx("div",{className:"modal-backdrop fade show"})]})}export{$ as default};
